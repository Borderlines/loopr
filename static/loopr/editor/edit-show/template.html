<loop></loop>
<nav class="right">
    <div class="first-block block">
        <h3>Actions</h3>
        <ul>
            <li><a ng-click="vm.addToLoopMode()">Add to loop</a></li>
            <li><a ng-click="vm.removeShow()">Delete this show</a></li>
            <li>Merge this show with another</li>
            <li><a target="_blank" ng-href="/loop/{{user.username}}/?show={{vm.show._id}}">Watch loop from here</a></li>
        </ul>
    </div>
    <div class="block">
        <h3>Options</h3>
        <ul class="options">
            <li ng-repeat="option in vm.options">
                <label>
                    {{ option.label }}
                    <input type="{{option.type}}" ng-model="vm.show.settings[option.name]" ng-change="vm.saveShow()" ng-model-options="{debounce: 2000}">
                </label>
            </li>
            <li>
                <label><input type="checkbox" ng-model="vm.show.settings.shuffle" ng-change="vm.saveShow()">
                    Shuffle Mode
                </label>
            </li>
            <li>
                <label><input type="checkbox" ng-model="vm.show.settings.hide_strip" ng-change="vm.saveShow()">
                    Hide the STRIP for this show
                </label>
            </li>
        </ul>
    </div>
</nav>
<div class="create-show content">
    <form>
        <h2 ng-model="vm.show.title" ng-change="vm.saveShow()" ng-model-options="{debounce: 500}" contenteditable="true"></h2>
        <label>Link
        </label>
        <input type="text" ng-model="vm.url" placeholder="{{ vm.example || 'video link' }}"/>
        <button ng-click="vm.addLink(vm.url)">+ Add</button>
    </form>
    <table>
        <tr ng-repeat="link in vm.show.links" ng-mouseover="vm.illustration = link.thumbnail">
            <td class="title"><div>{{ $index + 1 }}. <a target="_blank" ng-href="/loop/{{user.username}}/?show={{vm.show._id}}&item={{$index}}">{{ link.title }}</a></div></td>
            <td class="subtitle"><input type="text" ng-model="link.subtitle" ng-change="vm.saveShow()" ng-model-options="{debounce: 2000}" placeholder="subtitle"/></td>
            <td>
                <a ng-href="{{ link.url }}" target="_blank">
                    <i class="fa fa-{{link.provider_name | lowercase}}"></i>
                </a>
            </td>
            <td>{{ link.duration | seconds }}</td>
            <td class="reorder"><a ng-click="vm.reorderLink(link, -1)" ng-show="!$first">&#8593;</a><a ng-click="vm.reorderLink(link, 1)" ng-show="!$last">&#8595;</a></span></td>
            <td><a ng-click="vm.removeVideo(link)">X</a></td>
        </tr>
    </table>
    <img class="illustration" ng-src="{{ vm.illustration || vm.show.thumbnail || vm.show.links[0].thumbnail }}"/>
</div>
